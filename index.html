<!DOCTYPE html>
<html id='htmlLang' lang="ja">
<!-- <html lang="ja"> -->

</html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <script src="js/search.js" defer></script> <!-- æ¤œç´¢æ©Ÿèƒ½ -->
    <script src="js/history.js" defer></script> <!-- å±¥æ­´æ©Ÿèƒ½ -->
    <script src="js/create.js" defer></script> <!-- HTMLå‹•çš„ç”Ÿæˆæ©Ÿèƒ½ -->
    <script src="js/language.js" defer></script> <!-- å¤šè¨€èªå¯¾å¿œæ©Ÿèƒ½ -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans&display=swap" rel="stylesheet">
    <title>ToPickPot</title>
</head>

<header>
    <!-- ã‚¿ã‚¤ãƒˆãƒ«ã¨èª¬æ˜ -->
    <img class='titleLogo' src='./img/topickpot_logo.png' alt="ToPickPot" height="">
    <!-- <h1 id='aboutTitle' class='title'>ToPickPot</h1> -->
    <!-- <div class='titleLogo'><img src="../img/ToPickPot.png" alt=""></div> -->
    <p id='aboutTopicPot'></p>

    <div class='menuBox'>
        <!-- è¨€èªã‚»ãƒ¬ã‚¯ãƒˆãƒ•ã‚©ãƒ¼ãƒ  -->
        <p id='aboutLangType'>ğŸŒ</p>
        <select class='menuForm' id="langType" type='text'></select>

        <!-- ãƒ‘ãƒãƒ«æ•°ã‚»ãƒ¬ã‚¯ãƒˆãƒ•ã‚©ãƒ¼ãƒ  -->
        <p id='aboutPanelNumber'>ğŸ½</p>
        <select class='menuForm' id="panelNum" type='number'></select>

        <!-- æ›´æ–°ç–‘ä¼¼ãƒœã‚¿ãƒ³ -->
        <button class='reLoad' id='reLoadBtn'>ğŸ”„</button>
    </div>
</header>

<body>
    <!-- æ¤œç´¢ãƒ‘ãƒãƒ«è¡¨ç¤ºé ˜åŸŸ -->
    <div id='searchPanelBox' class='searchResultBox'></div>

    <!-- æ¤œç´¢ãƒ‘ãƒãƒ«è¡¨ç¤ºã®ä¸‹ã«ã¯å±¥æ­´ã¨ãŠæ°—ã«å…¥ã‚Šã¨ä½œè€…æƒ…å ±ä¸¦ã¹ã‚‹ -->
    <div class='actionResultBox'>

        <!-- æ¤œç´¢å±¥æ­´è¡¨ç¤ºé ˜åŸŸ -->
        <div class='hisBox'>
            <h2 id='aboutResent'>HISTORYğŸ“Œ</h2>
            <div id='resentList'></div>
            <button class='delHis' id='deleteHistory'>ğŸ—‘</button>
        </div>

        <!-- ãŠæ°—ã«å…¥ã‚Šè¡¨ç¤ºé ˜åŸŸ -->
        <div class='favBox'>
            <h2 id='aboutFavorite'>LIKEâ™¡</h2>
            <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
            <div id='favoriteList'></div>
            <button class='delFav' id='deleteFavorite'>ğŸ—‘</button>
        </div>

        <!-- about meè¡¨ç¤ºé ˜åŸŸ -->
        <div class='autherBox'>
            <h2 id='aboutAuther'>AUTHERğŸ‘¤</h2>
            <div id='autherList'>
            </div>
        </div>
    </div>

</body>

<hr>

<footer>
    <!-- åˆæœŸåŒ–ãƒœã‚¿ãƒ³ -->
    <p id='aboutInit'>å‹•ã‹ãªã„å ´åˆã¯åˆæœŸåŒ–ã‚’è©¦ã—ã¦ãã ã•ã„</p>
    <button id='init'>åˆæœŸåŒ–</button>
</footer>


<script>
    $(document).ready(function () {
        //å®šæ•°å®šç¾©
        const PANELMAX = 100;

        //ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿
        let localData;
        let jsonData;

        //åˆæœŸè¨­å®š
        if (localStorage.getItem('localDataJson') === null) {
            //ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®åˆæœŸè¨­å®š(ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯æ—¥æœ¬èªã®3x3)
            localData = {
                lang: '4',      //ãƒšãƒ¼ã‚¸ã®è¨€èª
                panelNum: '9',    //ãƒ‘ãƒãƒ«ã®æ•°
                his: {
                    cnt: '0',    //å±¥æ­´ã®ã‚«ã‚¦ãƒ³ã‚¿
                    max: '100',  //å±¥æ­´ã®æœ€å¤§ä¿æŒæ•°
                    ary: [],
                },
                fav: {
                    cnt: '0',    //å±¥æ­´ã®ã‚«ã‚¦ãƒ³ã‚¿
                    max: '100',  //å±¥æ­´ã®æœ€å¤§ä¿æŒæ•°
                    ary: [],
                },
            }
            jsonData = JSON.stringify(localData)
            localStorage.setItem('localDataJson', jsonData);
        }
        else {
            //ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰èª­ã¿å‡ºã—
            jsonData = localStorage.getItem('localDataJson');
            localData = JSON.parse(jsonData);
        }

        //è¨€èªè¨­å®š
        languageChange(localData.lang);

        //è¨€èªã‚»ãƒ¬ã‚¯ãƒˆãƒ•ã‚©ãƒ¼ãƒ ä½œæˆ
        createLangForm();
        $('#langType').val(localData.lang);

        //ãƒ‘ãƒãƒ«æ•°ã‚»ãƒ¬ã‚¯ãƒˆãƒ•ã‚©ãƒ¼ãƒ ä½œæˆ
        createPanelNumForm(PANELMAX);
        $('#panelNum').val(localData.panelNum);

        //è¨€èªè¨­å®šã¨æ¤œç´¢ãƒ‘ãƒãƒ«ä½œæˆ
        createSearchPanel(localData.lang, localData.panelNum);

        //å±¥æ­´ä½œæˆ
        if (localData.his.cnt != 0) {
            createHis();
        }

        //ãŠæ°—ã«å…¥ã‚Šä½œæˆ
        if (localData.fav.cnt != 0) {
            createFav();
        }

        createAuther();

    });

</script>

</html>