<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <script src="js/word.js"></script> <!-- 単語機能 -->
    <script src="js/search.js"></script> <!-- 検索機能 -->
    <script src="js/history.js"></script> <!-- 履歴機能 -->
    <script src="js/share.js"></script> <!-- 共有機能 -->
    <script src="js/create.js"></script> <!-- HTML動的生成機能 -->
    <script src="js/language.js"></script> <!-- 多言語対応機能 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <title>ToPickPot</title>
</head>

<header>
    <h1 id='aboutTitle' class='title'>ToPickPot</h1>
    <p id='aboutTopicPot'></p>
</header>

<div class='menuBar'>
    <p id='aboutLangType'>language</p>

    <select name="" id="langType" type="texst">
        <option value="0">English</option>
        <option value="1">français</option>
        <option value="2">Deutsch</option>
        <option value="3">español</option>
        <option value="4">日本語</option>
        <option value="5">русский</option>
        <option value="6">italiano</option>
        <option value="7">中文</option>
    </select>

    <p id='aboutColmn'>column</p>

    <select name="" id="colNum" type="number">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
    </select>

    <p id='aboutRow'>Row</p>

    <select name="" id="rowNum" type="number">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
    </select>
    <button id='createPot'>Let's topicpot !!</button>
</div>

<body>
    <div id='searchPanel' class='searchResult'>
    </div>
    <h2 id='aboutResent'></h2>
    <h2 id='aboutSchedule'></h2>
</body>

<footer>
    <hr>
    <table>
        <tr>
            <td>Twitter</td>
            <td>@miniusagi33 </td>
        </tr>
    </table>
</footer>


<script>

    //ローカルデータ
    let localData;
    let jsonData;

    //初期設定
    if (localStorage.getItem('localDataJson') === null) {
        //ローカルストレージの初期設定(デフォルトは日本語の3x3)
        localData = {
            lang: '4',
            col: '3',
            row: '3',
        }
        jsonData = JSON.stringify(localData)
        localStorage.setItem('localDataJson', jsonData);
    }
    else {
        //ローカルストレージから読み出し
        jsonData = localStorage.getItem('localDataJson');
        localData = JSON.parse(jsonData);
    }
    $('#langType').val(localData.lang);
    $('#colNum').val(localData.col);
    $('#rowNum').val(localData.row);

    //ページの言語設定変更
    languageChange(localData.lang);
    //トピックポット作成
    createPot(localData.col, localData.row);
    //リンク作成
    createTopic(languageResource[localData.lang].language, localData.col, localData.row);


    // 言語ボタン
    $('#langType').change('click', function () {

        let lang = $('#langType').val();

        //ページ全体の言語設定を変更
        languageChange(lang);

        //ローカルストレージにJSON形式で保存
        localData.lang = lang;
        jsonData = JSON.stringify(localData)
        localStorage.setItem('localDataJson', jsonData);
    });

    // パネルボタン
    $('#createPot').on('click', function () {

        let col = $('#colNum').val();
        let row = $('#rowNum').val();
        let lang = $('#langType').val();

        //パネル作成
        createPot(col, row);
        //リンク作成
        createTopic(languageResource[lang].language, col, row);

        //ローカルストレージにJSON形式で保存
        localData.col = col;
        localData.row = row;
        localData.lang = lang;
        jsonData = JSON.stringify(localData)
        localStorage.setItem('localDataJson', jsonData);
    });




</script>

</html>